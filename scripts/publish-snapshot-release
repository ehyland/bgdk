#!/usr/bin/env bash

set -euxo pipefail

# manually create the changeset
echo "---
'bgdk': patch
'@bgdk/storybook': patch
'bgdk-basic-example': patch
---

Snapshot Release
" > .changeset/snapshot.md

# bump versions
yarn changeset version --snapshot dev

# build
yarn ci:prepare

# changesets implements custom logic that revents registry from being sourced from .npmrc
export npm_config_registry=`npm config get registry`

yarn changeset publish --tag dev
